<app-hr text="SIMULATION CONTROL"></app-hr>
<div class="field has-addons has-addons-centered m-0">
    <p class="control">
        <button
            class="button is-responsive"
            data-testid="slowdown"
            title="slow down"
            aria-label="slow down"
            (click)="simulationService.setSpeedDown()">
            <fa-icon [icon]="['fas', 'backward']"></fa-icon>
        </button>
    </p>
    <p class="control">
        <button
            [disabled]="simulationService.getBackwardStepsAmount() < 1"
            class="button is-responsive"
            data-testid="iteration-backward"
            title="iteration backwards"
            aria-label="iteration backwards"
            [ngClass]="{
                buttonBackwards: simulationService.getBackwardStepsAmount() < 1
            }"
            (click)="simulationService.stepBackwards()">
            <fa-icon class="pr-1" [icon]="['fas', 'step-backward']"></fa-icon>
            <b> {{ simulationService.getBackwardStepsAmount() | maxNumber : 9 }} </b>
        </button>
    </p>
    <p class="control">
        <button
            class="button is-responsive"
            data-testid="clear-grid"
            title="clear grid"
            aria-label="clear grid"
            [disabled]="simulationService.getSimulationStatus()"
            (click)="simulationService.reset()">
            @if (recordService.getIteration() > 0) {
            <fa-icon class="fa-flip-horizontal" [icon]="['fas', 'redo']"></fa-icon>
            } @if (recordService.getIteration() === 0) {
            <fa-icon [icon]="['fas', 'trash']"></fa-icon>
            }
        </button>
    </p>
    <p class="control">
        <button
            [disabled]="simulationService.getIsPlayDisabled()"
            class="button is-responsive"
            data-testid="stop-play"
            title="play"
            aria-label="play"
            (click)="simulationService.setSimulationStatus()">
            @if (simulationService.getSimulationStatus()) {
            <fa-icon class="has-text-danger" [icon]="['fas', 'stop']"></fa-icon>
            } @if (!simulationService.getSimulationStatus()) {
            <fa-icon class="has-text-primary" [icon]="['fas', 'play']"></fa-icon>
            }
        </button>
    </p>
    <p class="control">
        <button
            [disabled]="simulationService.getIsPlayDisabled()"
            class="button is-responsive"
            data-testid="next-iteration"
            title="next iteration"
            aria-label="next iteration"
            (click)="simulationService.stepForward()">
            <fa-icon [icon]="['fas', 'step-forward']"></fa-icon>
        </button>
    </p>
    <p class="control">
        <button
            [disabled]="simulationService.getIsPlayDisabled()"
            class="button is-responsive"
            data-testid="complete-algorithm"
            title="complete algorithm"
            aria-label="complete algorithm"
            (click)="simulationService.completeAlgorithm()">
            <fa-icon [icon]="['fas', 'fast-forward']"></fa-icon>
        </button>
    </p>
    <p class="control">
        <button
            class="button is-responsive"
            data-testid="speed-up"
            title="speed up"
            aria-label="speed up"
            (click)="simulationService.setSpeedUp()">
            <fa-icon [icon]="['fas', 'forward']"></fa-icon>
        </button>
    </p>
</div>
<div class="field has-addons has-addons-centered">
    <p class="control">
        <button
            class="button is-responsive"
            data-testid="import"
            title="import"
            aria-label="import"
            (click)="simulationService.toggleShowImportModal(); simulationService.setSimulationStatus(false)">
            <span class="icon">
                <fa-icon [icon]="['far', 'edit']"></fa-icon>
            </span>
            <b>Import</b>
        </button>
    </p>
    <p class="control">
        <button
            class="button is-responsive"
            data-testid="export"
            title="export"
            aria-label="export"
            (click)="handleExportLogic()">
            <span class="icon">
                <fa-icon [icon]="['far', 'save']"></fa-icon>
            </span>
            <b>Export</b>
        </button>
    </p>
</div>
